referenceLevel: -15
plugins:
# filter out the low lows
- pluginUri: http://calf.sourceforge.net/plugins/Filter
  parameters:
    freq: "48"
    res: "0.707"
    mode: "3"
    inertia: "5"
# shape overall sound with the multiband
- pluginUri: http://calf.sourceforge.net/plugins/MultibandCompressor
  parameters:
    # global parameters
    mode: "1"
    # band 1 parameters
    detection0: "0"
    freq0: "300"
    threshold0: "linear(integrated - 2)"
    ratio0: "8"
    attack0: "3"
    release0: "120"
    makeup0: "linear(0)"
    knee0: "linear(6)"
    # band 2 parameters
    detection1: "0"
    freq1: "1000"
    threshold1: "linear(integrated + 4)"
    ratio1: "4"
    attack1: "15"
    release1: "150"
    makeup1: "linear(0)"
    knee1: "linear(min((momentary - integrated) * 2, 16))"
    # band 3 parameters
    detection2: "0"
    freq2: "6000"
    threshold2: "linear(integrated - 2)"
    ratio2: "3"
    attack2: "15"
    release2: "150"
    makeup2: "linear(0)"
    knee2: "linear(min((momentary - integrated) * 2, 16))"
    # band 4 parameters
    detection3: "0"
    threshold3: "linear(integrated - 4)"
    ratio3: "2"
    attack3: "30"
    release3: "300"
    makeup3: "linear(0)"
    knee3: "linear(min((momentary - integrated) * 3, 16))"
# control macro dynamics
- pluginUri: http://calf.sourceforge.net/plugins/Compressor
  parameters:
    threshold: "linear(shortterm + 1)"
    ratio: "3"
    attack: "30"
    release: "100"
    makeup: "linear(0)"
    knee: "linear(min((shortterm - integrated) * 3, 16))"
    detection: "0"
# control micro dynamics
- pluginUri: http://calf.sourceforge.net/plugins/Compressor
  parameters:
    threshold: "linear(momentary + 1)"
    ratio: "4"
    attack: "1"
    release: "100"
    makeup: "linear(0)"
    knee: "linear(min((momentary - integrated) * 3, 16))"
    detection: "1"
# final shaping
- pluginUri: http://calf.sourceforge.net/plugins/Compressor
  parameters:
    # push closer to reference
    level_in: "linear(reference - integrated)"
    threshold: "linear(-4)"
    ratio: "4"
    attack: "0.1"
    release: "100"
    makeup: "linear(0)"
    knee: "linear(2)"
    detection: "1"
# catch occasional peaks
- pluginUri: http://gareus.org/oss/lv2/dpl#stereo
  parameters:
    gain: "max(max(15 - peak + integrated, 0) / 3, max(4 - (momentary - integrated), 0) / 2)"
    threshold: "-0.5"
    release: "0.030"